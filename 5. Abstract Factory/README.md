Абстрактная фабрика (англ. Abstract factory) — порождающий шаблон проектирования, предоставляет интерфейс для **создания
семейств взаимосвязанных или взаимозависимых объектов**, не специфицируя их конкретных классов. Шаблон реализуется
созданием абстрактного класса Factory, который представляет собой интерфейс для создания компонентов системы (например,
для оконного интерфейса он может создавать окна и кнопки). Затем пишутся классы, реализующие этот интерфейс.

Абстрактная фабрика **скрывает** от клиентского кода **подробности** того, как и какие конкретно объекты будут созданы.
Но при
этом клиентский код может работать со всеми типами создаваемых продуктов, поскольку их **общий интерфейс** был заранее
определён.

В хорошей программе каждый класс отвечает только за одну вещь. Если класс имеет слишком много фабричных методов, они
способны затуманить его основную функцию. Поэтому имеет смысл **вынести** всю **логику создания** продуктов **в**
отдельную **иерархию
классов**, применив абстрактную фабрику.

##### Плюсы:

- изолирует конкретные классы;
- упрощает замену семейств продуктов;
- гарантирует сочетаемость продуктов.
- избавляет клиентский код от привязки к конкретным классам продуктов.
- выделяет код производства продуктов в одно место, упрощая поддержку кода.
- упрощает добавление новых продуктов в программу.
- реализует принцип открытости/закрытости.

##### Отношения с другими паттернами:

- Многие архитектуры начинаются с применения Фабричного метода (более простого и расширяемого через подклассы) и
  эволюционируют в сторону Абстрактной фабрики, Прототипа или Строителя (более гибких, но и более сложных).
- Строитель концентрируется на построении сложных объектов шаг за шагом. Абстрактная фабрика специализируется на
  создании семейств связанных продуктов. Строитель возвращает продукт только после выполнения всех шагов, а Абстрактная
  фабрика возвращает продукт сразу же.
- Классы Абстрактной фабрики чаще всего реализуются с помощью Фабричного метода, хотя они могут быть построены и на
  основе Прототипа.
- Абстрактная фабрика может быть использована вместо Фасада для того, чтобы скрыть платформо-зависимые классы.
- Абстрактная фабрика может работать совместно с Мостом. Это особенно полезно, если у вас есть абстракции, которые могут
  работать только с некоторыми из реализаций. В этом случае фабрика будет определять типы создаваемых абстракций и
  реализаций.
- Абстрактная фабрика, Строитель и Прототип могут быть реализованы при помощи Одиночки.

##### Минусы:

- усложняет код программы из-за введения множества дополнительных классов.
- сложно добавить поддержку нового вида продуктов.
- требует наличия всех типов продуктов в каждой вариации.

#### Применение:

- Система не должна зависеть от того, как создаются, компонуются и представляются входящие в неё объекты.
- Входящие в семейство взаимосвязанные **объекты должны использоваться вместе** и вам необходимо обеспечить выполнение
  этого
  ограничения.
- Система должна **конфигурироваться одним из семейств** составляющих её объектов.
- Требуется **предоставить** библиотеку объектов, раскрывая **только** их **интерфейсы**, но не реализацию.

#### Шаги реализации:

1) Создайте таблицу соотношений типов продуктов к вариациям семейств продуктов.
2) Сведите все вариации продуктов к общим интерфейсам.
3) Определите интерфейс абстрактной фабрики. Он должен иметь фабричные методы для создания каждого из типов продуктов.
4) Создайте классы конкретных фабрик, реализовав интерфейс абстрактной фабрики. Этих **классов** должно быть **столько
   же, сколько** и **вариаций семейств продуктов**.
5) Измените код инициализации программы так, чтобы она создавала определённую фабрику и передавала её в клиентский код.
6) Замените в клиентском коде участки создания продуктов через конструктор вызовами соответствующих методов фабрики.